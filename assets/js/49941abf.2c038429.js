"use strict";(self.webpackChunkdocusaurus_website=self.webpackChunkdocusaurus_website||[]).push([[2397],{3905:(e,i,t)=>{t.d(i,{Zo:()=>p,kt:()=>u});var n=t(7294);function a(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}function l(e,i){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);i&&(n=n.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),t.push.apply(t,n)}return t}function r(e){for(var i=1;i<arguments.length;i++){var t=null!=arguments[i]?arguments[i]:{};i%2?l(Object(t),!0).forEach((function(i){a(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}return e}function c(e,i){if(null==e)return{};var t,n,a=function(e,i){if(null==e)return{};var t,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)t=l[n],i.indexOf(t)>=0||(a[t]=e[t]);return a}(e,i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)t=l[n],i.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=n.createContext({}),I=function(e){var i=n.useContext(o),t=i;return e&&(t="function"==typeof e?e(i):r(r({},i),e)),t},p=function(e){var i=I(e.components);return n.createElement(o.Provider,{value:i},e.children)},s="mdxType",m={inlineCode:"code",wrapper:function(e){var i=e.children;return n.createElement(n.Fragment,{},i)}},k=n.forwardRef((function(e,i){var t=e.components,a=e.mdxType,l=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),s=I(t),k=a,u=s["".concat(o,".").concat(k)]||s[k]||m[k]||l;return t?n.createElement(u,r(r({ref:i},p),{},{components:t})):n.createElement(u,r({ref:i},p))}));function u(e,i){var t=arguments,a=i&&i.mdxType;if("string"==typeof e||a){var l=t.length,r=new Array(l);r[0]=k;var c={};for(var o in i)hasOwnProperty.call(i,o)&&(c[o]=i[o]);c.originalType=e,c[s]="string"==typeof e?e:a,r[1]=c;for(var I=2;I<l;I++)r[I]=t[I];return n.createElement.apply(null,r)}return n.createElement.apply(null,t)}k.displayName="MDXCreateElement"},7821:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>o,contentTitle:()=>r,default:()=>m,frontMatter:()=>l,metadata:()=>c,toc:()=>I});var n=t(7462),a=(t(7294),t(3905));const l={title:"Flink on k8s with application mode",date:new Date("2023-04-23T00:00:00.000Z"),tags:["Flink","Kubernetes"],categories:["\u6280\u672f\u5411"]},r="Flink on k8s with application mode",c={unversionedId:"programming-column/Flink-on-k8s-with-applicaiton-mode",id:"programming-column/Flink-on-k8s-with-applicaiton-mode",title:"Flink on k8s with application mode",description:"native k8s \u4f5c\u4e3a\u8d44\u6e90\u63d0\u4f9b\u8005\u7684 Application Mode\uff0c\u53ef\u7ec6\u5206\u4e3a\u4f7f\u7528 FLINK_HOME/bin/flink run-application \u65b9\u5f0f\uff0c\u548c flink-kubernetes-operator \u65b9\u5f0f\uff0c\u540e\u8005\u662f\u5b98\u65b9\u4e3b\u63a8\u7684\u672a\u6765\u7684\u65b9\u5411\u3002",source:"@site/docs/programming-column/Flink-on-k8s-with-applicaiton-mode.md",sourceDirName:"programming-column",slug:"/programming-column/Flink-on-k8s-with-applicaiton-mode",permalink:"/docs/programming-column/Flink-on-k8s-with-applicaiton-mode",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/programming-column/Flink-on-k8s-with-applicaiton-mode.md",tags:[{label:"Flink",permalink:"/docs/tags/flink"},{label:"Kubernetes",permalink:"/docs/tags/kubernetes"}],version:"current",frontMatter:{title:"Flink on k8s with application mode",date:"2023-04-23T00:00:00.000Z",tags:["Flink","Kubernetes"],categories:["\u6280\u672f\u5411"]},sidebar:"tutorialSidebar",previous:{title:"\u521d\u63a2ELK\u65e5\u5fd7\u7ba1\u7406\u4f53\u7cfb",permalink:"/docs/programming-column/ELK"},next:{title:"k8s \u76f8\u5173",permalink:"/docs/programming-column/Kubernetes"}},o={},I=[{value:"\u63d0\u524d\u521b\u5efa namespace",id:"\u63d0\u524d\u521b\u5efa-namespace",level:2},{value:"flink-kubernetes-operator",id:"flink-kubernetes-operator",level:2},{value:"\u524d\u63d0",id:"\u524d\u63d0",level:3},{value:"\u5b89\u88c5",id:"\u5b89\u88c5",level:3},{value:"\u63d0\u4ea4\u4efb\u52a1",id:"\u63d0\u4ea4\u4efb\u52a1",level:2},{value:"\u5176\u4ed6\u95ee\u9898",id:"\u5176\u4ed6\u95ee\u9898",level:2},{value:"\u5f15\u7528",id:"\u5f15\u7528",level:2},{value:"\u6269\u5c55\u9605\u8bfb",id:"\u6269\u5c55\u9605\u8bfb",level:2}],p={toc:I},s="wrapper";function m(e){let{components:i,...t}=e;return(0,a.kt)(s,(0,n.Z)({},p,t,{components:i,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"flink-on-k8s-with-application-mode"},"Flink on k8s with application mode"),(0,a.kt)("p",null,(0,a.kt)("img",{parentName:"p",src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXMtYXNjaWkiIHN0YW5kYWxvbmU9Im5vIj8+PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBjb250ZW50U3R5bGVUeXBlPSJ0ZXh0L2NzcyIgaGVpZ2h0PSIxOTBweCIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSIgc3R5bGU9IndpZHRoOjgzN3B4O2hlaWdodDoxOTBweDtiYWNrZ3JvdW5kOiNGRkZGRkY7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA4MzcgMTkwIiB3aWR0aD0iODM3cHgiIHpvb21BbmRQYW49Im1hZ25pZnkiPjxkZWZzLz48Zz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMTg1IiB4PSIxMCIgeT0iNzYuMjk2OSIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjE2NSIgeD0iMjAiIHk9Ijk5LjI5MiI+RmxpbmsgUmVzb3VyY2UgUHJvdmlkZXM8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjEzMCIgeD0iMjQ1IiB5PSIyMCIvPjx0ZXh0IGZpbGw9IiMwMDAwMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjE0IiBsZW5ndGhBZGp1c3Q9InNwYWNpbmciIHRleHRMZW5ndGg9IjExMCIgeD0iMjU1IiB5PSI0Mi45OTUxIj5TdGFuZGFsb25lICYjMzUwNjQ7JiMyNjQyNjs8L3RleHQ+PHBhdGggZD0iTTE5NSw5NC40NDUzIEwyMDUsOTQuNDQ1MyBDMjIwLDk0LjQ0NTMgMjIwLDM4LjE0ODQgMjM1LDM4LjE0ODQgTDI0NSwzOC4xNDg0ICIgZmlsbD0ibm9uZSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjA7Ii8+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjE0NyIgeD0iMjQ1IiB5PSI3Ni4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iMTI3IiB4PSIyNTUiIHk9Ijk5LjI5MiI+TmF0aXZlIEt1YmVybmV0ZXM8L3RleHQ+PHJlY3QgZmlsbD0iI0YxRjFGMSIgaGVpZ2h0PSIzNi4yOTY5IiByeD0iMTIuNSIgcnk9IjEyLjUiIHN0eWxlPSJzdHJva2U6IzE4MTgxODtzdHJva2Utd2lkdGg6MS41OyIgd2lkdGg9IjExMSIgeD0iNDQyIiB5PSI3Ni4yOTY5Ii8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTEiIHg9IjQ1MiIgeT0iOTkuMjkyIj5GbGluayAmIzM3MDk2OyYjMzI2MjY7JiMyNzE2OTsmIzI0MzM1OzwvdGV4dD48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMjIyIiB4PSI2MDMiIHk9IjQ4LjE0ODQiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIyMDIiIHg9IjYxMyIgeT0iNzEuMTQzNiI+QXBwbGljYXRpb24gTW9kZSYjNjUyODg7JiMyNjQxMjsmIzI1OTkxOyYjMjA4Njk7JiMyMzQ4MTsmIzY1Mjg5OzwvdGV4dD48cGF0aCBkPSJNNTUzLDk0LjQ0NTMgTDU2Myw5NC40NDUzIEM1NzgsOTQuNDQ1MyA1NzgsNjYuMjk2OSA1OTMsNjYuMjk2OSBMNjAzLDY2LjI5NjkgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iMTE4IiB4PSI2MDMiIHk9IjEwNC40NDUzIi8+PHRleHQgZmlsbD0iIzAwMDAwMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTQiIGxlbmd0aEFkanVzdD0ic3BhY2luZyIgdGV4dExlbmd0aD0iOTgiIHg9IjYxMyIgeT0iMTI3LjQ0MDQiPlNlc3Npb24gTW9kZTwvdGV4dD48cGF0aCBkPSJNNTUzLDk0LjQ0NTMgTDU2Myw5NC40NDUzIEM1NzgsOTQuNDQ1MyA1NzgsMTIyLjU5MzggNTkzLDEyMi41OTM4IEw2MDMsMTIyLjU5MzggIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cGF0aCBkPSJNMzkyLDk0LjQ0NTMgTDQwMiw5NC40NDUzIEM0MTcsOTQuNDQ1MyA0MTcsOTQuNDQ1MyA0MzIsOTQuNDQ1MyBMNDQyLDk0LjQ0NTMgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cGF0aCBkPSJNMTk1LDk0LjQ0NTMgTDIwNSw5NC40NDUzIEMyMjAsOTQuNDQ1MyAyMjAsOTQuNDQ1MyAyMzUsOTQuNDQ1MyBMMjQ1LDk0LjQ0NTMgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48cmVjdCBmaWxsPSIjRjFGMUYxIiBoZWlnaHQ9IjM2LjI5NjkiIHJ4PSIxMi41IiByeT0iMTIuNSIgc3R5bGU9InN0cm9rZTojMTgxODE4O3N0cm9rZS13aWR0aDoxLjU7IiB3aWR0aD0iNTgiIHg9IjI0NSIgeT0iMTMyLjU5MzgiLz48dGV4dCBmaWxsPSIjMDAwMDAwIiBmb250LWZhbWlseT0ic2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgbGVuZ3RoQWRqdXN0PSJzcGFjaW5nIiB0ZXh0TGVuZ3RoPSIzOCIgeD0iMjU1IiB5PSIxNTUuNTg4OSI+WUFSTjwvdGV4dD48cGF0aCBkPSJNMTk1LDk0LjQ0NTMgTDIwNSw5NC40NDUzIEMyMjAsOTQuNDQ1MyAyMjAsMTUwLjc0MjIgMjM1LDE1MC43NDIyIEwyNDUsMTUwLjc0MjIgIiBmaWxsPSJub25lIiBzdHlsZT0ic3Ryb2tlOiMxODE4MTg7c3Ryb2tlLXdpZHRoOjEuMDsiLz48IS0tU1JDPVtGTy16Slc5MTU4TnhVT2ZSMGViNjVYRkNMWDBLNHNHOTBJNm43RFdoY0paQ2FEY1BKVVhDNTd5Z2c2b2FDSk9LbmlCNEgwZHdEQjlZbklrdUZzOXZwX2Rra1ZTS0Y0c0x4WkZYemthMG9mbzlpek5oUEoyVjFFRjlyLVZ6d2RuNENlYUMzVklhS0xzNGtmOC1TejRaMDFiZVFZZlNvZ0wwTTNzLTFURHZoRFFlUFp4MmFVY1c0Z1haRGpBSmY5LUJzVlY3SXAxeE0yeDZpSDVQblM2MGlzd3U5bUt1cWlOcnVZUU9GV0x0cnlraHFWQnZWUnN1X0tVUnc3YVJCM3Z0S2NwS0kwNzM0YWFIR2tnUzJqcm9nazJaWWpkaWpoTFp2UlJwZ1I5WXVEMFhQMnQ4dmNxaFAtelFxM2VrR01JZElVZ21OZU1fZFl4cGo2OFQ0eHNLOVhOZ0tzV09lTGFWUkgyNlNyOWZFcE9xSklWNGc0UGVFc0dWSndkWDZXdjRMeGZDekVtbWtob3JId2ZLejBwalJIUEJDaW5IbXNKdzFHMDBdLS0+PC9nPjwvc3ZnPg==",alt:"plantuml"})),(0,a.kt)("p",null,"native k8s \u4f5c\u4e3a\u8d44\u6e90\u63d0\u4f9b\u8005\u7684 Application Mode\uff0c\u53ef\u7ec6\u5206\u4e3a\u4f7f\u7528 FLINK_HOME/bin/flink run-application \u65b9\u5f0f\uff0c\u548c flink-kubernetes-operator \u65b9\u5f0f\uff0c\u540e\u8005\u662f\u5b98\u65b9\u4e3b\u63a8\u7684\u672a\u6765\u7684\u65b9\u5411\u3002"),(0,a.kt)("h2",{id:"\u63d0\u524d\u521b\u5efa-namespace"},"\u63d0\u524d\u521b\u5efa namespace"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-Shell"},"# \u521b\u5efanamespace\nkubectl create ns flink\n# \u521b\u5efaserviceaccount\nkubectl create serviceaccount flink-service-account -n flink\n# \u7528\u6237\u6388\u6743\nkubectl create clusterrolebinding flink-role-binding-flink --clusterrole=edit --serviceaccount=flink:flink-service-account\n")),(0,a.kt)("h2",{id:"flink-kubernetes-operator"},"flink-kubernetes-operator"),(0,a.kt)("h3",{id:"\u524d\u63d0"},"\u524d\u63d0"),(0,a.kt)("p",null,"kubectl create -f ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/jetstack/cert-manager/releases/download/v1.8.2/cert-manager"},"https://github.com/jetstack/cert-manager/releases/download/v1.8.2/cert-manager"),"."),(0,a.kt)("h3",{id:"\u5b89\u88c5"},"\u5b89\u88c5"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-Shell"},"# \u6dfb\u52a0\u4ed3\u5e93\nhelm repo add flink-operator-repo https://downloads.apache.org/flink/flink-kubernetes-operator-1.4.0/\n# \u5b89\u88c5\u5230\u6307\u5b9a namespace\nhelm install flink-kubernetes-operator flink-operator-repo/flink-kubernetes-operator --namespace flink --create-namespace --set image.repository=apache/flink-kubernetes-operator\n")),(0,a.kt)("h2",{id:"\u63d0\u4ea4\u4efb\u52a1"},"\u63d0\u4ea4\u4efb\u52a1"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-Shell"},"# \u793a\u4f8b\u4efb\u52a1\nkubectl create -f https://raw.githubusercontent.com/apache/flink-kubernetes-operator/release-1.4/examples/basic.yaml\n# Flink web ui\nkubectl port-forward svc/basic-example-rest 8081\n\n# \u6e05\u7406\u4efb\u52a1\nkubectl delete flinkdeployment/basic-example\n")),(0,a.kt)("h2",{id:"\u5176\u4ed6\u95ee\u9898"},"\u5176\u4ed6\u95ee\u9898"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u4f7f\u7528 Minikube \u7684\u8bdd\uff0c\u7531\u4e8e\u5728\u5bb9\u5668\u91cc\uff0cport-forward \u5bbf\u4e3b\u673a\u65e0\u6cd5\u8bbf\u95ee")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-Shell"},"# --address \u63a5\u53d7\u6240\u6709\u6d41\u91cf\nkubectl port-forward --address 0.0.0.0 pod/nginx 80:80\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u5220\u9664\u547d\u540d\u7a7a\u95f4\u5361\u4f4f")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-Shell"},"# \u53ef\u4ee5\u67e5\u770b\u7a7a\u95f4\u4e0b\u8fd8\u6709\u4ec0\u4e48\u8d44\u6e90\nkubectl api-resources --verbs=list --namespaced -o name | xargs -n 1 kubectl get --show-kind --ignore-not-found -n <namespace>\n# \u67e5\u770b\u662fnamespace \u5361Terminating\u7684\u539f\u56e0\nkubectl get namespace <namespace> -o yaml\n")),(0,a.kt)("p",null,"\u53c2\u8003\uff1a\n",(0,a.kt)("a",{parentName:"p",href:"https://cloud.tencent.com/developer/article/1802531"},"\u5220\u9664namespace\u4e3a\u4ec0\u4e48\u4f1aTerminating\uff1f")),(0,a.kt)("h2",{id:"\u5f15\u7528"},"\u5f15\u7528"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://nightlies.apache.org/flink/flink-kubernetes-operator-docs-release-1.4/docs/try-flink-kubernetes-operator/quick-start/"},"flink-kubernetes-operator Quick Start")," \u5b98\u65b9demo"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.zhihu.com/people/0700360208/posts"},"Flink On K8s\u5b9e\u8df5")," \u6587\u7ae0\u548c\u89c6\u9891\u8d44\u6599\u6bd4\u8f83\u7cfb\u7edf\uff0c\u8d28\u91cf\u9ad8"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://www.cnblogs.com/liugp/p/16755095.html#4application%E6%A8%A1%E5%BC%8F%E6%8E%A8%E8%8D%90"},"\u3010\u4e91\u539f\u751f\u3011Flink on k8s \u8bb2\u89e3\u4e0e\u5b9e\u6218\u64cd\u4f5c")," \u9009\u8bfb")),(0,a.kt)("h2",{id:"\u6269\u5c55\u9605\u8bfb"},"\u6269\u5c55\u9605\u8bfb"),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://developer.aliyun.com/article/913111"},"Native Flink on Kubernetes \u5728\u5c0f\u7ea2\u4e66\u7684\u5b9e\u8df5"),"\n",(0,a.kt)("a",{parentName:"p",href:"https://www.jianshu.com/p/66054038b9ac"},"\u3010Flink on k8s\u3011Native Kubernetes Application \u90e8\u7f72\u6a21\u5f0f\u8be6\u89e3")))}m.isMDXComponent=!0}}]);